// Write to file
var f = fopen("test_rw.txt", "w");
var result = true;
if (f < 0) {
    print("ERROR: Failed to open file for writing");
    result = false;
} else {
    var written = fwrite(f, "Hello, World!");
    print("Wrote", written, "bytes");
    fclose(f);
}

// Read from file
var f2 = fopen("test_rw.txt", "r");
if (f2 < 0) {
    print("ERROR: Failed to open file for reading");
    result = false;
} else {
    var content = fread(f2);
    print("Read content:", content);
    if (content == "Hello, World!") {
        print("Content matches!");
    } else {
        print("ERROR: Content mismatch");
        result = false;
    }
    fclose(f2);
}

// Clean up
fdelete("test_rw.txt");

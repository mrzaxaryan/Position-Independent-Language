// Test sock_bind with closed socket handle
// Should return -1 for closed/invalid socket

// Get platform-appropriate shell
var shell = "";
if (os() == "win") {
    shell = "cmd.exe";
} else if (os() == "linux") {
    shell = "/bin/sh";
}

var sock = sock_connect("httpbin.org", 80);
if (sock >= 0) {
    sock_close(sock);
    // Now try to bind to the closed socket
    var result = sock_bind(sock, shell);
    print("Result with closed socket:", result);
    if (result == -1) { print("PASS"); }
} else {
    // If we can't connect, skip the test
    print("PASS");
}
